name: Telegram File Bot Runner
on:
  workflow_dispatch:
  schedule:
    - cron: '0 */4 * * *'  # Ù‡Ø± 4 Ø³Ø§Ø¹Øª Ø§Ø¬Ø±Ø§ Ø´ÙˆØ¯

jobs:
  run-bot:
    runs-on: ubuntu-latest
    steps:
    - name: Setup Python Environment
      run: |
        sudo apt-get update
        sudo apt-get install -y python3 python3-pip
        pip3 install python-telegram-bot

    - name: Create Bot Script
      run: |
        cat > telegram_bot.py << 'EOF'
# Ú©Ø¯ Ù¾Ø§ÛŒØªÙˆÙ† Ø¨Ø§Ù„Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù‚Ø±Ø§Ø± Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ø¯
# [Ú©Ø¯ Ú©Ø§Ù…Ù„ Ù¾Ø§ÛŒØªÙˆÙ† Ø§Ø² Ø¨Ø§Ù„Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ú©Ù¾ÛŒ Ø´ÙˆØ¯]
EOF

    - name: Run Telegram Bot
      run: |
        echo "ðŸ¤– Ø´Ø±ÙˆØ¹ Ø±Ø¨Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù…..."
        echo "ðŸ”— ØªÙˆÚ©Ù†: 7897337548:AAGudjNDkUM5pUWx93mdc6kFBrSqusuj_NA"
        
        # Ø§Ø¬Ø±Ø§ÛŒ Ø±Ø¨Ø§Øª Ø¨Ù‡ Ù…Ø¯Øª 3 Ø³Ø§Ø¹Øª
        timeout 10800 python3 telegram_bot.py || echo "â° Ø²Ù…Ø§Ù† Ø±Ø¨Ø§Øª Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³ÛŒØ¯"
        
        echo "âœ… Ø±Ø¨Ø§Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø¬Ø±Ø§ Ø´Ø¯"

    - name: Send Startup Notification
      run: |
        # Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø´Ø±ÙˆØ¹ Ø¨Ù‡ Ú©Ø§Ø±
        curl -s -X POST \
          "https://api.telegram.org/bot7897337548:AAGudjNDkUM5pUWx93mdc6kFBrSqusuj_NA/sendMessage" \
          -d "chat_id=${{ secrets.TELEGRAM_CHAT_ID }}" \
          -d "text=ðŸŸ¢ Ø±Ø¨Ø§Øª ÙØ¹Ø§Ù„ Ø´Ø¯! Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒØ¯ ÙØ§ÛŒÙ„ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯" \
          -d "parse_mode=HTML"

    - name: Keep Logs
      run: |
        echo "ðŸ“‹ Ù„Ø§Ú¯ Ø±Ø¨Ø§Øª:"
        echo "Ø±Ø¨Ø§Øª Ø¨Ù‡ Ù…Ø¯Øª 3 Ø³Ø§Ø¹Øª Ø§Ø¬Ø±Ø§ Ø´Ø¯"
        echo "Ø¨Ø±Ø§ÛŒ Ø§Ø¬Ø±Ø§ÛŒ Ù…Ø¬Ø¯Ø¯ØŒ workflow Ø±Ø§ Ø¯ÙˆØ¨Ø§Ø±Ù‡ run Ú©Ù†ÛŒØ¯"
