# bot.py
import os
import logging
import asyncio
from telegram import Update
from telegram.ext import Application, MessageHandler, filters, ContextTypes

# ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø±Ø¨Ø§Øª
TOKEN = "7897337548:AAGudjNDkUM5pUWx93mdc6kFBrSqusuj_NA"
logging.basicConfig(level=logging.INFO)

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text(
        "ğŸ¤– **Ø±Ø¨Ø§Øª ØªØ¨Ø¯ÛŒÙ„ ÙØ§ÛŒÙ„ Ø¨Ù‡ Ù„ÛŒÙ†Ú© ÙØ¹Ø§Ù„ Ø´Ø¯!**\n\n"
        "ğŸ“ ÙØ§ÛŒÙ„ Ø®ÙˆØ¯ Ø±Ø§ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯...",
        parse_mode='HTML'
    )

async def handle_file(update: Update, context: ContextTypes.DEFAULT_TYPE):
    try:
        message = update.message
        
        if message.video:
            file = message.video
            file_type = "ÙˆÛŒØ¯ÛŒÙˆ"
        elif message.document:
            file = message.document
            file_type = "ÙØ§ÛŒÙ„"
        elif message.photo:
            file = message.photo[-1]
            file_type = "Ø¹Ú©Ø³"
        else:
            await message.reply_text("âš ï¸ Ù„Ø·ÙØ§ ÛŒÚ© ÙØ§ÛŒÙ„ Ù…Ø¹ØªØ¨Ø± Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯")
            return

        await message.reply_text(f"ğŸ“¥ {file_type} Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯! Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø±Ø¯Ø§Ø²Ø´...")
        
        # Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù¾Ø±Ø¯Ø§Ø²Ø´
        download_url = f"https://transfer.sh/{file.file_id}"
        
        await message.reply_text(
            f"âœ… **ÙØ§ÛŒÙ„ Ø´Ù…Ø§ Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª!**\n\n"
            f"ğŸ”— Ù„ÛŒÙ†Ú© Ø¯Ø§Ù†Ù„ÙˆØ¯: {download_url}\n"
            f"ğŸ“¦ Ø­Ø¬Ù…: {file.file_size // 1024}KB\n"
            f"â° Ù„ÛŒÙ†Ú© 24 Ø³Ø§Ø¹Øª Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª",
            parse_mode='HTML'
        )

    except Exception as e:
        await message.reply_text("âŒ Ø®Ø·Ø§ Ø¯Ø± Ù¾Ø±Ø¯Ø§Ø²Ø´ ÙØ§ÛŒÙ„!")

async def main():
    application = Application.builder().token(TOKEN).build()
    
    application.add_handler(MessageHandler(filters.VIDEO, handle_file))
    application.add_handler(MessageHandler(filters.DOCUMENT, handle_file))
    application.add_handler(MessageHandler(filters.PHOTO, handle_file))
    application.add_handler(MessageHandler(filters.TEXT & filters.Regex('/start'), start))
    
    await application.run_polling()

if __name__ == "__main__":
    asyncio.run(main())
