name: Simple File to Link Converter
on:
  workflow_dispatch:
  schedule:
    - cron: '0 */6 * * *'  # Ù‡Ø± 6 Ø³Ø§Ø¹Øª Ø§Ø¬Ø±Ø§ Ø´ÙˆØ¯

jobs:
  file-converter:
    runs-on: ubuntu-latest
    steps:
    - name: Setup environment
      run: |
        sudo apt-get update
        sudo apt-get install -y python3 python3-pip ffmpeg
        pip3 install python-telegram-bot ffmpeg-python

    - name: Create simple bot script
      run: |
        cat > simple_bot.py << 'EOF'
#!/usr/bin/env python3
import os
import asyncio
from telegram import Update
from telegram.ext import Application, MessageHandler, filters

TOKEN = "7897337548:AAGudjNDkUM5pUWx93mdc6kFBrSqusuj_NA"

async def handle_message(update: Update, context):
    try:
        if update.message.video:
            await update.message.reply_text("ðŸŽ¥ ÙˆÛŒØ¯ÛŒÙˆ Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯! (Ø§Ù…Ú©Ø§Ù† Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø¯Ø± Ø§ÛŒÙ† Ù†Ø³Ø®Ù‡)")
        
        elif update.message.document:
            await update.message.reply_text("ðŸ“„ ÙØ§ÛŒÙ„ Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯! (Ø§Ù…Ú©Ø§Ù† Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø¯Ø± Ø§ÛŒÙ† Ù†Ø³Ø®Ù‡)")
        
        elif update.message.photo:
            await update.message.reply_text("ðŸ“· Ø¹Ú©Ø³ Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯!")
        
        else:
            await update.message.reply_text("ðŸ¤– Ø±Ø¨Ø§Øª ÙØ¹Ø§Ù„ Ø§Ø³Øª! ÙØ§ÛŒÙ„ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯")

    except Exception as e:
        await update.message.reply_text("âŒ Ø®Ø·Ø§: " + str(e))

async def main():
    app = Application.builder().token(TOKEN).build()
    app.add_handler(MessageHandler(filters.ALL, handle_message))
    
    print("ðŸ¤– Bot starting...")
    await app.run_polling()

if __name__ == "__main__":
    asyncio.run(main())
EOF

    - name: Run bot for limited time
      run: |
        echo "ðŸ”„ Ø§Ø¬Ø±Ø§ÛŒ Ø±Ø¨Ø§Øª Ø¨Ù‡ Ù…Ø¯Øª 10 Ø¯Ù‚ÛŒÙ‚Ù‡..."
        timeout 600 python3 simple_bot.py || echo "â° Ø²Ù…Ø§Ù† Ø±Ø¨Ø§Øª Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³ÛŒØ¯"
        
        echo "âœ… Ú©Ø§Ø± Ø±Ø¨Ø§Øª Ú©Ø§Ù…Ù„ Ø´Ø¯"
        echo "ðŸ“‹ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯"
